"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/factorial/route";
exports.ids = ["app/api/factorial/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffactorial%2Froute&page=%2Fapi%2Ffactorial%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffactorial%2Froute.ts&appDir=C%3A%5CUsers%5Ckshit%5CDesktop%5CProjects%5Cconflux%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckshit%5CDesktop%5CProjects%5Cconflux&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffactorial%2Froute&page=%2Fapi%2Ffactorial%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffactorial%2Froute.ts&appDir=C%3A%5CUsers%5Ckshit%5CDesktop%5CProjects%5Cconflux%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckshit%5CDesktop%5CProjects%5Cconflux&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_kshit_Desktop_Projects_conflux_app_api_factorial_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/factorial/route.ts */ \"(rsc)/./app/api/factorial/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/factorial/route\",\n        pathname: \"/api/factorial\",\n        filename: \"route\",\n        bundlePath: \"app/api/factorial/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\kshit\\\\Desktop\\\\Projects\\\\conflux\\\\app\\\\api\\\\factorial\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_kshit_Desktop_Projects_conflux_app_api_factorial_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/factorial/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZmYWN0b3JpYWwlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmZhY3RvcmlhbCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmZhY3RvcmlhbCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNrc2hpdCU1Q0Rlc2t0b3AlNUNQcm9qZWN0cyU1Q2NvbmZsdXglNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2tzaGl0JTVDRGVza3RvcCU1Q1Byb2plY3RzJTVDY29uZmx1eCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDMkI7QUFDeEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb25mbHV4Lz8yMmJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGtzaGl0XFxcXERlc2t0b3BcXFxcUHJvamVjdHNcXFxcY29uZmx1eFxcXFxhcHBcXFxcYXBpXFxcXGZhY3RvcmlhbFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZmFjdG9yaWFsL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZmFjdG9yaWFsXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9mYWN0b3JpYWwvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxrc2hpdFxcXFxEZXNrdG9wXFxcXFByb2plY3RzXFxcXGNvbmZsdXhcXFxcYXBwXFxcXGFwaVxcXFxmYWN0b3JpYWxcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2ZhY3RvcmlhbC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffactorial%2Froute&page=%2Fapi%2Ffactorial%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffactorial%2Froute.ts&appDir=C%3A%5CUsers%5Ckshit%5CDesktop%5CProjects%5Cconflux%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckshit%5CDesktop%5CProjects%5Cconflux&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/factorial/route.ts":
/*!************************************!*\
  !*** ./app/api/factorial/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_sim__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/sim */ \"(rsc)/./lib/sim.ts\");\n\n\nasync function POST(req) {\n    const { base, taxRates, rewardRates, punishFlags } = await req.json();\n    const data = (0,_lib_sim__WEBPACK_IMPORTED_MODULE_1__.factorialServer)(base, taxRates, rewardRates, punishFlags, 10);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        data\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2ZhY3RvcmlhbC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFBcUQ7QUFDekYsZUFBZUUsS0FBS0MsR0FBWTtJQUFHLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxRQUFRLEVBQUVDLFdBQVcsRUFBRUMsV0FBVyxFQUFFLEdBQUcsTUFBTUosSUFBSUssSUFBSTtJQUFJLE1BQU1DLE9BQU9SLHlEQUFlQSxDQUFDRyxNQUFnQkMsVUFBVUMsYUFBYUMsYUFBYTtJQUFLLE9BQU9QLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7UUFBRUM7SUFBSztBQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29uZmx1eC8uL2FwcC9hcGkvZmFjdG9yaWFsL3JvdXRlLnRzP2Y0NTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInOyBpbXBvcnQgeyBmYWN0b3JpYWxTZXJ2ZXIsIENvbmZpZyB9IGZyb20gJ0AvbGliL3NpbSc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpeyBjb25zdCB7IGJhc2UsIHRheFJhdGVzLCByZXdhcmRSYXRlcywgcHVuaXNoRmxhZ3MgfSA9IGF3YWl0IHJlcS5qc29uKCk7IGNvbnN0IGRhdGEgPSBmYWN0b3JpYWxTZXJ2ZXIoYmFzZSBhcyBDb25maWcsIHRheFJhdGVzLCByZXdhcmRSYXRlcywgcHVuaXNoRmxhZ3MsIDEwKTsgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZGF0YSB9KTsgfSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJmYWN0b3JpYWxTZXJ2ZXIiLCJQT1NUIiwicmVxIiwiYmFzZSIsInRheFJhdGVzIiwicmV3YXJkUmF0ZXMiLCJwdW5pc2hGbGFncyIsImpzb24iLCJkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/factorial/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/sim.ts":
/*!********************!*\
  !*** ./lib/sim.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensemble: () => (/* binding */ ensemble),\n/* harmony export */   factorialServer: () => (/* binding */ factorialServer),\n/* harmony export */   simulate: () => (/* binding */ simulate)\n/* harmony export */ });\nfunction randn() {\n    let u = 0, v = 0;\n    while(u === 0)u = Math.random();\n    while(v === 0)v = Math.random();\n    return Math.sqrt(-2 * Math.log(u)) * Math.cos(2 * Math.PI * v);\n}\nfunction ringNeighbors(n, i, k) {\n    const half = Math.floor(k / 2);\n    const N = [];\n    for(let d = 1; d <= half; d++){\n        N.push((i - d + n) % n);\n        N.push((i + d) % n);\n    }\n    return N;\n}\nfunction makeSmallWorld(n, k, p) {\n    const adj = Array.from({\n        length: n\n    }, ()=>[]);\n    const add = (u, v)=>{\n        if (!adj[u].includes(v)) adj[u].push(v);\n        if (!adj[v].includes(u)) adj[v].push(u);\n    };\n    const half = Math.floor(k / 2);\n    for(let i = 0; i < n; i++){\n        for(let d = 1; d <= half; d++){\n            const j = (i + d) % n;\n            add(i, j);\n        }\n    }\n    for(let i = 0; i < n; i++){\n        for(let d = 1; d <= half; d++){\n            const j = (i + d) % n;\n            if (Math.random() < p) {\n                adj[i] = adj[i].filter((x)=>x !== j);\n                adj[j] = adj[j].filter((x)=>x !== i);\n                let r = i, tries = 0;\n                while((r === i || adj[i].includes(r)) && tries < 5 * n){\n                    r = Math.floor(Math.random() * n);\n                    tries++;\n                }\n                if (r !== i) {\n                    add(i, r);\n                } else {\n                    add(i, j);\n                }\n            }\n        }\n    }\n    return adj;\n}\nfunction simulate(cfg) {\n    const n = cfg.n;\n    const agents = [];\n    const push = (t, k)=>{\n        for(let i = 0; i < k; i++)agents.push({\n            type: t\n        });\n    };\n    push(\"Egoist\", cfg.mix.Egoist);\n    push(\"CC\", cfg.mix.CC);\n    push(\"Punitive\", cfg.mix.Punitive);\n    push(\"Altruist\", cfg.mix.Altruist);\n    while(agents.length < n)agents.push({\n        type: \"Egoist\"\n    });\n    const topo = cfg.topology ?? {\n        type: \"wellmixed\",\n        k: 4,\n        p: 0.1\n    };\n    const adj = topo.type === \"smallworld\" ? makeSmallWorld(n, Math.max(2, topo.k | 0), Math.max(0, Math.min(1, topo.p))) : null;\n    let beliefs = Array(n).fill(cfg.w / 2);\n    const historyC = [];\n    const historyPayoffs = [];\n    for(let t = 0; t < cfg.T; t++){\n        const intended = [];\n        for(let i = 0; i < n; i++){\n            const typ = agents[i].type;\n            if (typ === \"Egoist\") {\n                intended.push(bestResponseEgoist(cfg, beliefs[i]));\n            } else if (typ === \"CC\" || typ === \"Punitive\") {\n                intended.push(Math.max(0, Math.min(cfg.w, Math.round(beliefs[i]))));\n            } else {\n                intended.push(Math.round(0.8 * cfg.w));\n            }\n        }\n        const contribs = intended.map((c)=>Math.max(0, Math.min(cfg.w, c + cfg.sigmaExec * randn())));\n        const obs = contribs.map((c)=>c + cfg.sigmaObs * randn());\n        const C = contribs.reduce((a, b)=>a + b, 0);\n        let payoff = new Array(n).fill(0);\n        if (topo.type === \"smallworld\" && adj) {\n            for(let i = 0; i < n; i++){\n                const group = [\n                    i,\n                    ...adj[i]\n                ];\n                const Cg = group.reduce((acc, j)=>acc + contribs[j], 0);\n                payoff[i] = cfg.w - contribs[i] + cfg.a * Cg;\n            }\n            if (cfg.punish.enabled) {\n                const thr = cfg.tax.threshold * cfg.w;\n                for(let i = 0; i < n; i++){\n                    const expectedPun = (adj[i]?.length || 0) * cfg.punish.fracPunishers;\n                    if (obs[i] < thr) {\n                        payoff[i] -= expectedPun * cfg.punish.fine / Math.max(1, adj[i]?.length || 1);\n                    }\n                }\n            }\n        } else {\n            payoff = contribs.map((c)=>cfg.w - c + cfg.a * C);\n            if (cfg.punish.enabled) {\n                const thr = cfg.tax.threshold * cfg.w;\n                const expectedPun = Math.max(n - 1, 0) * cfg.punish.fracPunishers;\n                obs.forEach((co, i)=>{\n                    if (co < thr) {\n                        payoff[i] -= expectedPun * cfg.punish.fine / n;\n                    }\n                });\n            }\n        }\n        if (cfg.tax.enabled) {\n            contribs.forEach((c, i)=>{\n                if (c < cfg.tax.threshold * cfg.w) payoff[i] -= cfg.tax.rate * (cfg.w - c);\n            });\n        }\n        if (cfg.reward.enabled) {\n            contribs.forEach((c, i)=>{\n                if (c >= cfg.reward.threshold * cfg.w) payoff[i] += cfg.reward.rate * c;\n            });\n        }\n        historyC.push(C);\n        const avg = C / n;\n        historyPayoffs.push(payoff.reduce((a, b)=>a + b, 0) / n);\n        beliefs = beliefs.map((b)=>{\n            const err = Math.abs(b - avg);\n            const lrMin = 0.05, lrMax = 0.8;\n            const lr = lrMin + (lrMax - lrMin) * (1 - Math.exp(-3 * err / (1 + b)));\n            return (1 - lr) * b + lr * avg;\n        });\n    }\n    const tail = (arr, k)=>arr.slice(Math.max(0, arr.length - k));\n    const coopTail = tail(historyC, 50).reduce((a, b)=>a + b, 0) / (Math.max(1, tail(historyC, 50).length) * n * cfg.w);\n    const payoffTail = tail(historyPayoffs, 50).reduce((a, b)=>a + b, 0) / Math.max(1, tail(historyPayoffs, 50).length);\n    const convT = convergence(historyC);\n    return {\n        historyC,\n        historyPayoffs,\n        coopTail,\n        payoffTail,\n        convT\n    };\n}\nfunction bestResponseEgoist(cfg, obsAvg) {\n    let bestC = 0, bestU = -1e18;\n    const n = cfg.n;\n    for(let c = 0; c <= cfg.w; c++){\n        const C = c + (n - 1) * obsAvg;\n        let u = cfg.w - c + cfg.a * C;\n        if (cfg.tax.enabled && c < cfg.tax.threshold * cfg.w) u -= cfg.tax.rate * (cfg.w - c);\n        if (cfg.reward.enabled && c >= cfg.reward.threshold * cfg.w) u += cfg.reward.rate * c;\n        if (cfg.punish.enabled) {\n            const thr = cfg.tax.threshold * cfg.w;\n            const sigma = Math.max(cfg.sigmaObs, 1e-6);\n            const pBelow = 0.5 * (1 + Math.tanh((thr - c) / (2 * sigma)));\n            const expectedPun = Math.max(n - 1, 0) * cfg.punish.fracPunishers;\n            u -= expectedPun * pBelow * cfg.punish.fine / n;\n        }\n        if (u > bestU) {\n            bestU = u;\n            bestC = c;\n        }\n    }\n    return bestC;\n}\nfunction convergence(series, tol = 1e-3, window = 20) {\n    const m = Math.max(1, Math.max(...series));\n    const s = series.map((x)=>x / m);\n    for(let t = window; t < s.length; t++){\n        const w = s.slice(t - window, t);\n        const mean = w.reduce((a, b)=>a + b, 0) / w.length;\n        const sd = Math.sqrt(w.reduce((a, b)=>a + (b - mean) ** 2, 0) / w.length);\n        if (sd < tol) return t;\n    }\n    return NaN;\n}\nfunction ensemble(cfg, runs) {\n    const rows = [];\n    for(let i = 0; i < runs; i++){\n        const r = simulate(cfg);\n        rows.push({\n            final_cooperation: r.coopTail,\n            avg_payoff_tail: r.payoffTail,\n            convergence_time: r.convT\n        });\n    }\n    const mean = (k)=>rows.reduce((a, b)=>a + b[k], 0) / rows.length;\n    const std = (k)=>{\n        const m = mean(k);\n        return Math.sqrt(rows.reduce((a, b)=>a + (b[k] - m) ** 2, 0) / rows.length);\n    };\n    const ciHalf = (k)=>1.96 * std(k) / Math.sqrt(rows.length);\n    const ci = {\n        final_cooperation: {\n            mean: mean(\"final_cooperation\"),\n            ci95_halfwidth: ciHalf(\"final_cooperation\")\n        },\n        avg_payoff_tail: {\n            mean: mean(\"avg_payoff_tail\"),\n            ci95_halfwidth: ciHalf(\"avg_payoff_tail\")\n        }\n    };\n    return {\n        df: rows,\n        ci\n    };\n}\nfunction factorialServer(base, taxRates, rewardRates, punishFlags, runs) {\n    const data = [];\n    for (const tax of taxRates){\n        for (const rew of rewardRates){\n            for (const pun of punishFlags){\n                const cfg = JSON.parse(JSON.stringify(base));\n                cfg.tax.enabled = tax > 0;\n                cfg.tax.rate = tax;\n                cfg.reward.enabled = rew > 0;\n                cfg.reward.rate = rew;\n                cfg.punish.enabled = pun;\n                const res = ensemble(cfg, runs);\n                data.push({\n                    tax_rate: tax,\n                    reward_rate: rew,\n                    punish: pun,\n                    final_coop_mean: res.ci.final_cooperation.mean,\n                    final_coop_ci95: res.ci.final_cooperation.ci95_halfwidth,\n                    payoff_mean: res.ci.avg_payoff_tail.mean,\n                    payoff_ci95: res.ci.avg_payoff_tail.ci95_halfwidth\n                });\n            }\n        }\n    }\n    return data;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TztRQUFDRyxJQUFHUjtRQUFNTTtJQUFFO0FBQUc7QUFFdEgsU0FBU0csZ0JBQWdCQyxJQUFXLEVBQUVDLFFBQWlCLEVBQUVDLFdBQW9CLEVBQUVDLFdBQXFCLEVBQUVkLElBQVc7SUFDdEgsTUFBTWUsT0FBVyxFQUFFO0lBQUUsS0FBSSxNQUFNckQsT0FBT2tELFNBQVM7UUFBRSxLQUFJLE1BQU1JLE9BQU9ILFlBQVk7WUFBRSxLQUFJLE1BQU1JLE9BQU9ILFlBQVk7Z0JBQzNHLE1BQU01RixNQUFJZ0csS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxTQUFTLENBQUNUO2dCQUFRekYsSUFBSXdDLEdBQUcsQ0FBQ0YsT0FBTyxHQUFDRSxNQUFJO2dCQUFHeEMsSUFBSXdDLEdBQUcsQ0FBQ08sSUFBSSxHQUFDUDtnQkFBS3hDLElBQUlnRCxNQUFNLENBQUNWLE9BQU8sR0FBQ3dELE1BQUk7Z0JBQUc5RixJQUFJZ0QsTUFBTSxDQUFDRCxJQUFJLEdBQUMrQztnQkFBSzlGLElBQUlxQyxNQUFNLENBQUNDLE9BQU8sR0FBQ3lEO2dCQUN2SixNQUFNSSxNQUFJdEIsU0FBUzdFLEtBQUs4RTtnQkFBT2UsS0FBSzVHLElBQUksQ0FBQztvQkFBQ21ILFVBQVM1RDtvQkFBSTZELGFBQVlQO29CQUFJekQsUUFBTzBEO29CQUM1RU8saUJBQWdCSCxJQUFJZCxFQUFFLENBQUNMLGlCQUFpQixDQUFDTixJQUFJO29CQUFFNkIsaUJBQWdCSixJQUFJZCxFQUFFLENBQUNMLGlCQUFpQixDQUFDTSxjQUFjO29CQUN0R2tCLGFBQVlMLElBQUlkLEVBQUUsQ0FBQ0osZUFBZSxDQUFDUCxJQUFJO29CQUFFK0IsYUFBWU4sSUFBSWQsRUFBRSxDQUFDSixlQUFlLENBQUNLLGNBQWM7Z0JBQUE7WUFBSTtRQUFDO0lBQUM7SUFDcEcsT0FBT087QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbmZsdXgvLi9saWIvc2ltLnRzPzFlNGIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHR5cGUgVG9wb2xvZ3kgPSB7IHR5cGU6ICd3ZWxsbWl4ZWQnIHwgJ3NtYWxsd29ybGQnOyBrOiBudW1iZXI7IHA6IG51bWJlciB9O1xuZXhwb3J0IHR5cGUgQ29uZmlnPXtuOm51bWJlcjt3Om51bWJlcjthOm51bWJlcjtUOm51bWJlcjtzaWdtYUV4ZWM6bnVtYmVyO3NpZ21hT2JzOm51bWJlcjtcbnRheDp7ZW5hYmxlZDpib29sZWFuO3RocmVzaG9sZDpudW1iZXI7cmF0ZTpudW1iZXJ9O3Jld2FyZDp7ZW5hYmxlZDpib29sZWFuO3RocmVzaG9sZDpudW1iZXI7cmF0ZTpudW1iZXJ9O1xucHVuaXNoOntlbmFibGVkOmJvb2xlYW47Y29zdDpudW1iZXI7ZmluZTpudW1iZXI7ZnJhY1B1bmlzaGVyczpudW1iZXJ9O1xubWl4OntDQzpudW1iZXI7RWdvaXN0Om51bWJlcjtQdW5pdGl2ZTpudW1iZXI7QWx0cnVpc3Q6bnVtYmVyfTtcbnRvcG9sb2d5PzogVG9wb2xvZ3kgfTtcblxuZnVuY3Rpb24gcmFuZG4oKXtsZXQgdT0wLHY9MDt3aGlsZSh1PT09MCl1PU1hdGgucmFuZG9tKCk7d2hpbGUodj09PTApdj1NYXRoLnJhbmRvbSgpO3JldHVybiBNYXRoLnNxcnQoLTIqTWF0aC5sb2codSkpKk1hdGguY29zKDIqTWF0aC5QSSp2KTt9XG5cbmZ1bmN0aW9uIHJpbmdOZWlnaGJvcnMobjpudW1iZXIsIGk6bnVtYmVyLCBrOm51bWJlcil7XG4gIGNvbnN0IGhhbGY9TWF0aC5mbG9vcihrLzIpOyBjb25zdCBOOm51bWJlcltdPVtdO1xuICBmb3IobGV0IGQ9MTsgZDw9aGFsZjsgZCsrKXsgTi5wdXNoKChpLWQrbiklbik7IE4ucHVzaCgoaStkKSVuKTsgfVxuICByZXR1cm4gTjtcbn1cblxuZnVuY3Rpb24gbWFrZVNtYWxsV29ybGQobjpudW1iZXIsIGs6bnVtYmVyLCBwOm51bWJlcil7XG4gIGNvbnN0IGFkajogbnVtYmVyW11bXSA9IEFycmF5LmZyb20oe2xlbmd0aDpufSwgKCk9PltdKTtcbiAgY29uc3QgYWRkPSh1Om51bWJlcix2Om51bWJlcik9PnsgaWYoIWFkalt1XS5pbmNsdWRlcyh2KSkgYWRqW3VdLnB1c2godik7IGlmKCFhZGpbdl0uaW5jbHVkZXModSkpIGFkalt2XS5wdXNoKHUpOyB9O1xuICBjb25zdCBoYWxmPU1hdGguZmxvb3Ioay8yKTtcbiAgZm9yKGxldCBpPTA7aTxuO2krKyl7IGZvcihsZXQgZD0xOyBkPD1oYWxmOyBkKyspeyBjb25zdCBqPShpK2QpJW47IGFkZChpLGopO30gfVxuICBmb3IobGV0IGk9MDtpPG47aSsrKXsgZm9yKGxldCBkPTE7IGQ8PWhhbGY7IGQrKyl7IGNvbnN0IGo9KGkrZCklbjsgaWYoTWF0aC5yYW5kb20oKTxwKXtcbiAgICBhZGpbaV09YWRqW2ldLmZpbHRlcih4PT54IT09aik7IGFkaltqXT1hZGpbal0uZmlsdGVyKHg9PnghPT1pKTtcbiAgICBsZXQgcj1pLCB0cmllcz0wOyB3aGlsZSgocj09PWkgfHwgYWRqW2ldLmluY2x1ZGVzKHIpKSAmJiB0cmllczw1Km4peyByPU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpuKTsgdHJpZXMrKzsgfVxuICAgIGlmKHIhPT1pKXsgYWRkKGkscik7fSBlbHNlIHsgYWRkKGksaik7IH1cbiAgfSB9IH1cbiAgcmV0dXJuIGFkajtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNpbXVsYXRlKGNmZzpDb25maWcpe1xuICBjb25zdCBuPWNmZy5uO1xuICBjb25zdCBhZ2VudHM6e3R5cGU6c3RyaW5nfVtdPVtdOyBjb25zdCBwdXNoPSh0OnN0cmluZyxrOm51bWJlcik9Pntmb3IobGV0IGk9MDtpPGs7aSsrKWFnZW50cy5wdXNoKHt0eXBlOnR9KTt9O1xuICBwdXNoKCdFZ29pc3QnLGNmZy5taXguRWdvaXN0KTsgcHVzaCgnQ0MnLGNmZy5taXguQ0MpOyBwdXNoKCdQdW5pdGl2ZScsY2ZnLm1peC5QdW5pdGl2ZSk7IHB1c2goJ0FsdHJ1aXN0JyxjZmcubWl4LkFsdHJ1aXN0KTtcbiAgd2hpbGUoYWdlbnRzLmxlbmd0aDxuKSBhZ2VudHMucHVzaCh7dHlwZTonRWdvaXN0J30pO1xuXG4gIGNvbnN0IHRvcG89IGNmZy50b3BvbG9neSA/PyB7IHR5cGU6ICd3ZWxsbWl4ZWQnLCBrOiA0LCBwOiAwLjEgfTtcbiAgY29uc3QgYWRqID0gdG9wby50eXBlPT09J3NtYWxsd29ybGQnID8gbWFrZVNtYWxsV29ybGQobiwgTWF0aC5tYXgoMiwgdG9wby5rfDApLCBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB0b3BvLnApKSkgOiBudWxsO1xuXG4gIGxldCBiZWxpZWZzPUFycmF5KG4pLmZpbGwoY2ZnLncvMik7IGNvbnN0IGhpc3RvcnlDOm51bWJlcltdPVtdOyBjb25zdCBoaXN0b3J5UGF5b2ZmczpudW1iZXJbXT1bXTtcbiAgZm9yKGxldCB0PTA7dDxjZmcuVDt0Kyspe1xuICAgIGNvbnN0IGludGVuZGVkOm51bWJlcltdPVtdO1xuICAgIGZvcihsZXQgaT0wO2k8bjtpKyspe1xuICAgICAgY29uc3QgdHlwPWFnZW50c1tpXS50eXBlO1xuICAgICAgaWYodHlwPT09J0Vnb2lzdCcpeyBpbnRlbmRlZC5wdXNoKGJlc3RSZXNwb25zZUVnb2lzdChjZmcsIGJlbGllZnNbaV0pKTsgfVxuICAgICAgZWxzZSBpZih0eXA9PT0nQ0MnIHx8IHR5cD09PSdQdW5pdGl2ZScpeyBpbnRlbmRlZC5wdXNoKE1hdGgubWF4KDAsIE1hdGgubWluKGNmZy53LCBNYXRoLnJvdW5kKGJlbGllZnNbaV0pKSkpOyB9XG4gICAgICBlbHNlIHsgaW50ZW5kZWQucHVzaChNYXRoLnJvdW5kKDAuOCpjZmcudykpOyB9XG4gICAgfVxuICAgIGNvbnN0IGNvbnRyaWJzPWludGVuZGVkLm1hcChjPT5NYXRoLm1heCgwLE1hdGgubWluKGNmZy53LGMrY2ZnLnNpZ21hRXhlYypyYW5kbigpKSkpO1xuICAgIGNvbnN0IG9icz1jb250cmlicy5tYXAoYz0+YytjZmcuc2lnbWFPYnMqcmFuZG4oKSk7XG4gICAgY29uc3QgQz1jb250cmlicy5yZWR1Y2UoKGEsYik9PmErYiwwKTtcbiAgICBsZXQgcGF5b2ZmPW5ldyBBcnJheShuKS5maWxsKDApO1xuXG4gICAgaWYodG9wby50eXBlPT09J3NtYWxsd29ybGQnICYmIGFkail7XG4gICAgICBmb3IobGV0IGk9MDtpPG47aSsrKXtcbiAgICAgICAgY29uc3QgZ3JvdXA9W2ksIC4uLmFkaltpXV07XG4gICAgICAgIGNvbnN0IENnPWdyb3VwLnJlZHVjZSgoYWNjLGopPT5hY2MrY29udHJpYnNbal0sMCk7XG4gICAgICAgIHBheW9mZltpXT0oY2ZnLnctY29udHJpYnNbaV0pK2NmZy5hKkNnO1xuICAgICAgfVxuICAgICAgaWYoY2ZnLnB1bmlzaC5lbmFibGVkKXtcbiAgICAgICAgY29uc3QgdGhyPWNmZy50YXgudGhyZXNob2xkKmNmZy53O1xuICAgICAgICBmb3IobGV0IGk9MDtpPG47aSsrKXtcbiAgICAgICAgICBjb25zdCBleHBlY3RlZFB1bj0oYWRqW2ldPy5sZW5ndGh8fDApKmNmZy5wdW5pc2guZnJhY1B1bmlzaGVycztcbiAgICAgICAgICBpZihvYnNbaV08dGhyKXsgcGF5b2ZmW2ldLT0gZXhwZWN0ZWRQdW4qY2ZnLnB1bmlzaC5maW5lIC8gTWF0aC5tYXgoMSwoYWRqW2ldPy5sZW5ndGh8fDEpKTsgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBheW9mZiA9IGNvbnRyaWJzLm1hcChjPT4oY2ZnLnctYykrY2ZnLmEqQyk7XG4gICAgICBpZihjZmcucHVuaXNoLmVuYWJsZWQpe1xuICAgICAgICBjb25zdCB0aHI9Y2ZnLnRheC50aHJlc2hvbGQqY2ZnLnc7IGNvbnN0IGV4cGVjdGVkUHVuPU1hdGgubWF4KG4tMSwwKSpjZmcucHVuaXNoLmZyYWNQdW5pc2hlcnM7XG4gICAgICAgIG9icy5mb3JFYWNoKChjbyxpKT0+eyBpZihjbzx0aHIpeyBwYXlvZmZbaV0tPSBleHBlY3RlZFB1bipjZmcucHVuaXNoLmZpbmUvbjsgfSB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZihjZmcudGF4LmVuYWJsZWQpeyBjb250cmlicy5mb3JFYWNoKChjLGkpPT57IGlmKGM8Y2ZnLnRheC50aHJlc2hvbGQqY2ZnLncpIHBheW9mZltpXS09Y2ZnLnRheC5yYXRlKihjZmcudy1jKTsgfSk7IH1cbiAgICBpZihjZmcucmV3YXJkLmVuYWJsZWQpeyBjb250cmlicy5mb3JFYWNoKChjLGkpPT57IGlmKGM+PWNmZy5yZXdhcmQudGhyZXNob2xkKmNmZy53KSBwYXlvZmZbaV0rPWNmZy5yZXdhcmQucmF0ZSpjOyB9KTsgfVxuXG4gICAgaGlzdG9yeUMucHVzaChDKTsgY29uc3QgYXZnPUMvbjsgaGlzdG9yeVBheW9mZnMucHVzaChwYXlvZmYucmVkdWNlKChhLGIpPT5hK2IsMCkvbik7XG4gICAgYmVsaWVmcz1iZWxpZWZzLm1hcChiPT57IGNvbnN0IGVycj1NYXRoLmFicyhiLWF2Zyk7IGNvbnN0IGxyTWluPTAuMDUsIGxyTWF4PTAuODsgY29uc3QgbHI9bHJNaW4rKGxyTWF4LWxyTWluKSooMS1NYXRoLmV4cCgtMyplcnIvKDErYikpKTsgcmV0dXJuICgxLWxyKSpiK2xyKmF2ZzsgfSk7XG4gIH1cbiAgY29uc3QgdGFpbD0oYXJyOm51bWJlcltdLGs6bnVtYmVyKT0+YXJyLnNsaWNlKE1hdGgubWF4KDAsYXJyLmxlbmd0aC1rKSk7XG4gIGNvbnN0IGNvb3BUYWlsPSB0YWlsKGhpc3RvcnlDLDUwKS5yZWR1Y2UoKGEsYik9PmErYiwwKS8oTWF0aC5tYXgoMSx0YWlsKGhpc3RvcnlDLDUwKS5sZW5ndGgpKm4qY2ZnLncpO1xuICBjb25zdCBwYXlvZmZUYWlsPSB0YWlsKGhpc3RvcnlQYXlvZmZzLDUwKS5yZWR1Y2UoKGEsYik9PmErYiwwKS9NYXRoLm1heCgxLHRhaWwoaGlzdG9yeVBheW9mZnMsNTApLmxlbmd0aCk7XG4gIGNvbnN0IGNvbnZUPSBjb252ZXJnZW5jZShoaXN0b3J5Qyk7IHJldHVybiB7IGhpc3RvcnlDLCBoaXN0b3J5UGF5b2ZmcywgY29vcFRhaWwsIHBheW9mZlRhaWwsIGNvbnZUIH07XG59XG5cbmZ1bmN0aW9uIGJlc3RSZXNwb25zZUVnb2lzdChjZmc6Q29uZmlnLCBvYnNBdmc6bnVtYmVyKXsgbGV0IGJlc3RDPTAsIGJlc3RVPS0xZTE4OyBjb25zdCBuPWNmZy5uO1xuICBmb3IobGV0IGM9MDtjPD1jZmcudztjKyspeyBjb25zdCBDPWMrKG4tMSkqb2JzQXZnOyBsZXQgdT0oY2ZnLnctYykrY2ZnLmEqQztcbiAgICBpZihjZmcudGF4LmVuYWJsZWQgJiYgYzxjZmcudGF4LnRocmVzaG9sZCpjZmcudykgdS09Y2ZnLnRheC5yYXRlKihjZmcudy1jKTtcbiAgICBpZihjZmcucmV3YXJkLmVuYWJsZWQgJiYgYz49Y2ZnLnJld2FyZC50aHJlc2hvbGQqY2ZnLncpIHUrPWNmZy5yZXdhcmQucmF0ZSpjO1xuICAgIGlmKGNmZy5wdW5pc2guZW5hYmxlZCl7IGNvbnN0IHRocj1jZmcudGF4LnRocmVzaG9sZCpjZmcudzsgY29uc3Qgc2lnbWE9TWF0aC5tYXgoY2ZnLnNpZ21hT2JzLDFlLTYpO1xuICAgICAgY29uc3QgcEJlbG93PTAuNSooMStNYXRoLnRhbmgoKHRoci1jKS8oMipzaWdtYSkpKTsgY29uc3QgZXhwZWN0ZWRQdW49TWF0aC5tYXgobi0xLDApKmNmZy5wdW5pc2guZnJhY1B1bmlzaGVyczsgdS09IGV4cGVjdGVkUHVuKnBCZWxvdypjZmcucHVuaXNoLmZpbmUvbjsgfVxuICAgIGlmKHU+YmVzdFUpe2Jlc3RVPXU7IGJlc3RDPWM7fSB9IHJldHVybiBiZXN0QzsgfVxuXG5mdW5jdGlvbiBjb252ZXJnZW5jZShzZXJpZXM6bnVtYmVyW10sIHRvbD0xZS0zLCB3aW5kb3c9MjApeyBjb25zdCBtPU1hdGgubWF4KDEsTWF0aC5tYXgoLi4uc2VyaWVzKSk7IGNvbnN0IHM9c2VyaWVzLm1hcCh4PT54L20pO1xuICBmb3IobGV0IHQ9d2luZG93O3Q8cy5sZW5ndGg7dCsrKXsgY29uc3Qgdz1zLnNsaWNlKHQtd2luZG93LHQpOyBjb25zdCBtZWFuPXcucmVkdWNlKChhLGIpPT5hK2IsMCkvdy5sZW5ndGg7XG4gICAgY29uc3Qgc2Q9TWF0aC5zcXJ0KHcucmVkdWNlKChhLGIpPT5hKyhiLW1lYW4pKioyLDApL3cubGVuZ3RoKTsgaWYoc2Q8dG9sKSByZXR1cm4gdDsgfSByZXR1cm4gTmFOOyB9XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnNlbWJsZShjZmc6Q29uZmlnLCBydW5zOm51bWJlcil7IGNvbnN0IHJvd3M6YW55W109W107IGZvcihsZXQgaT0wO2k8cnVucztpKyspeyBjb25zdCByPXNpbXVsYXRlKGNmZyk7XG4gIHJvd3MucHVzaCh7ZmluYWxfY29vcGVyYXRpb246ci5jb29wVGFpbCwgYXZnX3BheW9mZl90YWlsOnIucGF5b2ZmVGFpbCwgY29udmVyZ2VuY2VfdGltZTpyLmNvbnZUfSk7IH1cbiAgY29uc3QgbWVhbj0oazpzdHJpbmcpPT4gcm93cy5yZWR1Y2UoKGEsYik9PmErYltrXSwwKS9yb3dzLmxlbmd0aDtcbiAgY29uc3Qgc3RkPShrOnN0cmluZyk9PnsgY29uc3QgbT1tZWFuKGspOyByZXR1cm4gTWF0aC5zcXJ0KHJvd3MucmVkdWNlKChhLGIpPT5hKyhiW2tdLW0pKioyLDApL3Jvd3MubGVuZ3RoKTsgfTtcbiAgY29uc3QgY2lIYWxmPShrOnN0cmluZyk9PiAxLjk2KnN0ZChrKS9NYXRoLnNxcnQocm93cy5sZW5ndGgpO1xuICBjb25zdCBjaT17IGZpbmFsX2Nvb3BlcmF0aW9uOnttZWFuOm1lYW4oJ2ZpbmFsX2Nvb3BlcmF0aW9uJyksY2k5NV9oYWxmd2lkdGg6Y2lIYWxmKCdmaW5hbF9jb29wZXJhdGlvbicpfSxcbiAgICAgICAgICAgICBhdmdfcGF5b2ZmX3RhaWw6e21lYW46bWVhbignYXZnX3BheW9mZl90YWlsJyksY2k5NV9oYWxmd2lkdGg6Y2lIYWxmKCdhdmdfcGF5b2ZmX3RhaWwnKX19OyByZXR1cm4ge2RmOnJvd3MsIGNpfTsgfVxuXG5leHBvcnQgZnVuY3Rpb24gZmFjdG9yaWFsU2VydmVyKGJhc2U6Q29uZmlnLCB0YXhSYXRlczpudW1iZXJbXSwgcmV3YXJkUmF0ZXM6bnVtYmVyW10sIHB1bmlzaEZsYWdzOmJvb2xlYW5bXSwgcnVuczpudW1iZXIpe1xuICBjb25zdCBkYXRhOmFueVtdPVtdOyBmb3IoY29uc3QgdGF4IG9mIHRheFJhdGVzKXsgZm9yKGNvbnN0IHJldyBvZiByZXdhcmRSYXRlcyl7IGZvcihjb25zdCBwdW4gb2YgcHVuaXNoRmxhZ3Mpe1xuICAgIGNvbnN0IGNmZz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGJhc2UpKTsgY2ZnLnRheC5lbmFibGVkPXRheD4wOyBjZmcudGF4LnJhdGU9dGF4OyBjZmcucmV3YXJkLmVuYWJsZWQ9cmV3PjA7IGNmZy5yZXdhcmQucmF0ZT1yZXc7IGNmZy5wdW5pc2guZW5hYmxlZD1wdW47XG4gICAgY29uc3QgcmVzPWVuc2VtYmxlKGNmZywgcnVucyk7IGRhdGEucHVzaCh7dGF4X3JhdGU6dGF4LHJld2FyZF9yYXRlOnJldyxwdW5pc2g6cHVuLFxuICAgICAgZmluYWxfY29vcF9tZWFuOnJlcy5jaS5maW5hbF9jb29wZXJhdGlvbi5tZWFuLCBmaW5hbF9jb29wX2NpOTU6cmVzLmNpLmZpbmFsX2Nvb3BlcmF0aW9uLmNpOTVfaGFsZndpZHRoLFxuICAgICAgcGF5b2ZmX21lYW46cmVzLmNpLmF2Z19wYXlvZmZfdGFpbC5tZWFuLCBwYXlvZmZfY2k5NTpyZXMuY2kuYXZnX3BheW9mZl90YWlsLmNpOTVfaGFsZndpZHRofSk7IH19fVxuICByZXR1cm4gZGF0YTtcbn0iXSwibmFtZXMiOlsicmFuZG4iLCJ1IiwidiIsIk1hdGgiLCJyYW5kb20iLCJzcXJ0IiwibG9nIiwiY29zIiwiUEkiLCJyaW5nTmVpZ2hib3JzIiwibiIsImkiLCJrIiwiaGFsZiIsImZsb29yIiwiTiIsImQiLCJwdXNoIiwibWFrZVNtYWxsV29ybGQiLCJwIiwiYWRqIiwiQXJyYXkiLCJmcm9tIiwibGVuZ3RoIiwiYWRkIiwiaW5jbHVkZXMiLCJqIiwiZmlsdGVyIiwieCIsInIiLCJ0cmllcyIsInNpbXVsYXRlIiwiY2ZnIiwiYWdlbnRzIiwidCIsInR5cGUiLCJtaXgiLCJFZ29pc3QiLCJDQyIsIlB1bml0aXZlIiwiQWx0cnVpc3QiLCJ0b3BvIiwidG9wb2xvZ3kiLCJtYXgiLCJtaW4iLCJiZWxpZWZzIiwiZmlsbCIsInciLCJoaXN0b3J5QyIsImhpc3RvcnlQYXlvZmZzIiwiVCIsImludGVuZGVkIiwidHlwIiwiYmVzdFJlc3BvbnNlRWdvaXN0Iiwicm91bmQiLCJjb250cmlicyIsIm1hcCIsImMiLCJzaWdtYUV4ZWMiLCJvYnMiLCJzaWdtYU9icyIsIkMiLCJyZWR1Y2UiLCJhIiwiYiIsInBheW9mZiIsImdyb3VwIiwiQ2ciLCJhY2MiLCJwdW5pc2giLCJlbmFibGVkIiwidGhyIiwidGF4IiwidGhyZXNob2xkIiwiZXhwZWN0ZWRQdW4iLCJmcmFjUHVuaXNoZXJzIiwiZmluZSIsImZvckVhY2giLCJjbyIsInJhdGUiLCJyZXdhcmQiLCJhdmciLCJlcnIiLCJhYnMiLCJsck1pbiIsImxyTWF4IiwibHIiLCJleHAiLCJ0YWlsIiwiYXJyIiwic2xpY2UiLCJjb29wVGFpbCIsInBheW9mZlRhaWwiLCJjb252VCIsImNvbnZlcmdlbmNlIiwib2JzQXZnIiwiYmVzdEMiLCJiZXN0VSIsInNpZ21hIiwicEJlbG93IiwidGFuaCIsInNlcmllcyIsInRvbCIsIndpbmRvdyIsIm0iLCJzIiwibWVhbiIsInNkIiwiTmFOIiwiZW5zZW1ibGUiLCJydW5zIiwicm93cyIsImZpbmFsX2Nvb3BlcmF0aW9uIiwiYXZnX3BheW9mZl90YWlsIiwiY29udmVyZ2VuY2VfdGltZSIsInN0ZCIsImNpSGFsZiIsImNpIiwiY2k5NV9oYWxmd2lkdGgiLCJkZiIsImZhY3RvcmlhbFNlcnZlciIsImJhc2UiLCJ0YXhSYXRlcyIsInJld2FyZFJhdGVzIiwicHVuaXNoRmxhZ3MiLCJkYXRhIiwicmV3IiwicHVuIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwicmVzIiwidGF4X3JhdGUiLCJyZXdhcmRfcmF0ZSIsImZpbmFsX2Nvb3BfbWVhbiIsImZpbmFsX2Nvb3BfY2k5NSIsInBheW9mZl9tZWFuIiwicGF5b2ZmX2NpOTUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/sim.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffactorial%2Froute&page=%2Fapi%2Ffactorial%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffactorial%2Froute.ts&appDir=C%3A%5CUsers%5Ckshit%5CDesktop%5CProjects%5Cconflux%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckshit%5CDesktop%5CProjects%5Cconflux&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();